import express, { Request, Response } from "express";
import 'dotenv/config';
const router = express.Router();

router.get('/details/:id', (req: Request, res: Response) => {
    res.type('json');

    const detailsResponse = {"id":69,"common_name":"Kandy Kitchen Japanese Maple","scientific_name":["Acer palmatum 'Kandy Kitchen'"],"other_name":[],"family":null,"origin":["Japan"],"type":"tree","dimension":"Height:  6 feet","dimensions":{"type":"Height","min_value":6,"max_value":6,"unit":"feet"},"cycle":"Perennial","attracts":[],"propagation":["Grafting Propagation","Cutting","Layering Propagation","Air Layering Propagation","Root Division"],"hardiness":{"min":"5","max":"5"},"hardiness_location":{"full_url":"https:\/\/perenual.com\/api\/hardiness-map?species_id=69&size=og&key=sk-QB8564e204a7366e81934","full_iframe":"<iframe frameborder=0 scrolling=yes seamless=seamless width=1000 height=550 style='margin:auto;' src='https:\/\/perenual.com\/api\/hardiness-map?species_id=69&size=og&key=sk-QB8564e204a7366e81934'><\/iframe>"},"watering":"Average","depth_water_requirement":[],"volume_water_requirement":[],"watering_period":null,"watering_general_benchmark":{"value":"7-10","unit":"days"},"plant_anatomy":[],"sunlight":["full sun","part shade"],"pruning_month":["March","April","August","June","July","August"],"pruning_count":{"amount":1,"interval":"yearly"},"seeds":0,"maintenance":null,"care-guides":"http:\/\/perenual.com\/api\/species-care-guide-list?species_id=69&key=sk-","soil":[],"growth_rate":"Low","drought_tolerant":false,"salt_tolerant":false,"thorny":false,"invasive":false,"tropical":false,"indoor":false,"care_level":"Medium","pest_susceptibility":[],"pest_susceptibility_api":"Coming Soon","flowers":false,"flowering_season":null,"flower_color":"","cones":false,"fruits":false,"edible_fruit":false,"edible_fruit_taste_profile":"Coming Soon","fruit_nutritional_value":"Coming Soon","fruit_color":[],"harvest_season":null,"leaf":true,"leaf_color":["green","red","pink"],"edible_leaf":false,"cuisine":false,"medicinal":false,"poisonous_to_humans":0,"poisonous_to_pets":0,"description":"The Kandy Kitchen Japanese Maple is an amazing plant species to add to any garden or landscape. With its red and white variegated leaves and orange-red fall color, it adds an impressive splash of color. It's an upright, rounded form and fast growth rate make it a dynamic feature, and it grows well in both full sun and partial shade, making it an extremely versatile species. This Japanese Maple does well in USDA Hardiness Zones 5-9, making it a \"must-have\" for any temperate garden. It is disease and pest resistant, and is relatively drought tolerant as well. With beautiful foliage and petite size, the Kandy Kitchen Japanese Maple is a great addition to any yard!","default_image":{"license":4,"license_name":"Attribution License","license_url":"https:\/\/creativecommons.org\/licenses\/by\/2.0\/","original_url":"https:\/\/perenual.com\/storage\/species_image\/69_acer_palmatum_kandy_kitchen\/og\/51150061025_29f690d490_b.jpg","regular_url":"https:\/\/perenual.com\/storage\/species_image\/69_acer_palmatum_kandy_kitchen\/regular\/51150061025_29f690d490_b.jpg","medium_url":"https:\/\/perenual.com\/storage\/species_image\/69_acer_palmatum_kandy_kitchen\/medium\/51150061025_29f690d490_b.jpg","small_url":"https:\/\/perenual.com\/storage\/species_image\/69_acer_palmatum_kandy_kitchen\/small\/51150061025_29f690d490_b.jpg","thumbnail":"https:\/\/perenual.com\/storage\/species_image\/69_acer_palmatum_kandy_kitchen\/thumbnail\/51150061025_29f690d490_b.jpg"},"other_images":"Upgrade Plan To Supreme For Access https:\/\/perenual.com\/subscription-api-pricing. Im sorry"}
    const careResponse = {"data":[{"id":1605,"species_id":69,"common_name":"Kandy Kitchen Japanese Maple","scientific_name":["Acer palmatum 'Kandy Kitchen'"],"section":[{"id":5020,"type":"watering","description":"Kandy Kitchen Japanese Maple (Acer palmatum 'Kandy Kitchen') should be watered deeply and infrequently, approximately every 7 days during the growing season. During the hot summer months, watering should be increased to ensure the root system does not dry out. In mid-summer (July and August), 2 to 3 waterings per week are recommended. When watering, use enough water to saturate the root system and allow the soil to dry out between waterings."},{"id":5021,"type":"sunlight","description":"Kandy Kitchen Japanese Maple (Acer palmatum 'Kandy Kitchen') prefers to be grown in bright, filtered sunlight or partial shade. For optimal health, up to 4 hours of direct sunlight per day is best. Keep in mind that the amount of direct sun is dependent on your region and climate, and the plant must be protected from scorching midday rays. To ensure that your Kandy Kitchen Japanese Maple plant gets the right amount of sunlight, they should be placed in a location that receives morning sun and some additional dappled sun during the late afternoon. Direct sun in the afternoon should be avoided so the foliage does not become scorched."},{"id":5022,"type":"pruning","description":"Kandy Kitchen Japanese Maple should be pruned in early spring, ideally right after the last frost, or in late summer after the harshest of summer's heat has passed. Cut back branches that have grown too long and prune away dead or unhealthy branches as needed. Pruning can help to promote a fuller, more natural looking foliage shape for this type of tree. Be careful not to over prune as this can cause the tree to be unhealthy and slow down its growth. It is best to remove no more than 1-third of the tree at any 1 time. This will encourage a healthy growth and keep the Japanese Maple looking its best."}]}],"to":1,"per_page":30,"current_page":1,"from":1,"last_page":1,"total":1}

    if (!careResponse.data ||
        careResponse.data.length === 0 ||
        !careResponse.data[0].common_name ||
        !careResponse.data[0].scientific_name ||
        !detailsResponse ||
        !detailsResponse.default_image ||
        !detailsResponse.default_image.regular_url ||
        !detailsResponse.description) {
        res.send({});
    } else {
        const watering = careResponse.data[0].section.find(obj => {
            return obj.type === 'watering' && typeof obj.description !== 'undefined' && obj.description !== null
        });
        const sunlight = careResponse.data[0].section.find(obj => {
            return obj.type === 'sunlight' && typeof obj.description !== 'undefined' && obj.description !== null
        });
        const pruning = careResponse.data[0].section.find(obj => {
            return obj.type === 'pruning' && typeof obj.description !== 'undefined' && obj.description !== null
        });
        const mock = {
            common_name: careResponse.data[0].common_name,
            scientific_name: Array.isArray(careResponse.data[0].scientific_name) ?
                careResponse.data[0].scientific_name[0] :
                careResponse.data[0].scientific_name,
            image: detailsResponse.default_image.regular_url,
            description: detailsResponse.description,
            watering: watering?.description,
            sunlight: sunlight?.description,
            pruning: pruning?.description,
        };
        res.send(mock);
    }


});
router.get('/search/:page/:query?', async (req: Request, res: Response) => {
    res.type('json');
    let searchString = `https://perenual.com/api/species-list?key=${process.env.PERENUAL_API_KEY}`;
    searchString +=`&page=${req.params.page}`;
    if (req.params.query)
        searchString +=`&q=${req.params.query}`;

    const response = await fetch(searchString).then(res => res.json()).catch(() => null);
    // MOCK DATA
    //const response = {"data":[{"id":1,"common_name":"European Silver Fir","scientific_name":["Abies alba"],"other_name":["Common Silver Fir"],"cycle":"Perennial","watering":"Frequent","sunlight":["full sun"],"default_image":{"license":45,"license_name":"Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0)","license_url":"https://creativecommons.org/licenses/by-sa/3.0/deed.en","original_url":"https://perenual.com/storage/species_image/1_abies_alba/og/1536px-Abies_alba_SkalitC3A9.jpg","regular_url":"https://perenual.com/storage/species_image/1_abies_alba/regular/1536px-Abies_alba_SkalitC3A9.jpg","medium_url":"https://perenual.com/storage/species_image/1_abies_alba/medium/1536px-Abies_alba_SkalitC3A9.jpg","small_url":"https://perenual.com/storage/species_image/1_abies_alba/small/1536px-Abies_alba_SkalitC3A9.jpg","thumbnail":"https://perenual.com/storage/species_image/1_abies_alba/thumbnail/1536px-Abies_alba_SkalitC3A9.jpg"}},{"id":2,"common_name":"Pyramidalis Silver Fir","scientific_name":["Abies alba 'Pyramidalis'"],"other_name":[],"cycle":"Perennial","watering":"Average","sunlight":["full sun"],"default_image":{"license":5,"license_name":"Attribution-ShareAlike License","license_url":"https://creativecommons.org/licenses/by-sa/2.0/","original_url":"https://perenual.com/storage/species_image/2_abies_alba_pyramidalis/og/49255769768_df55596553_b.jpg","regular_url":"https://perenual.com/storage/species_image/2_abies_alba_pyramidalis/regular/49255769768_df55596553_b.jpg","medium_url":"https://perenual.com/storage/species_image/2_abies_alba_pyramidalis/medium/49255769768_df55596553_b.jpg","small_url":"https://perenual.com/storage/species_image/2_abies_alba_pyramidalis/small/49255769768_df55596553_b.jpg","thumbnail":"https://perenual.com/storage/species_image/2_abies_alba_pyramidalis/thumbnail/49255769768_df55596553_b.jpg"}},{"id":3,"common_name":"White Fir","scientific_name":["Abies concolor"],"other_name":["Silver Fir","Concolor Fir","Colorado Fir"],"cycle":"Perennial","watering":"Average","sunlight":["Full sun","part shade"],"default_image":{"license":5,"license_name":"Attribution-ShareAlike License","license_url":"https://creativecommons.org/licenses/by-sa/2.0/","original_url":"https://perenual.com/storage/species_image/3_abies_concolor/og/52292935430_f4f3b22614_b.jpg","regular_url":"https://perenual.com/storage/species_image/3_abies_concolor/regular/52292935430_f4f3b22614_b.jpg","medium_url":"https://perenual.com/storage/species_image/3_abies_concolor/medium/52292935430_f4f3b22614_b.jpg","small_url":"https://perenual.com/storage/species_image/3_abies_concolor/small/52292935430_f4f3b22614_b.jpg","thumbnail":"https://perenual.com/storage/species_image/3_abies_concolor/thumbnail/52292935430_f4f3b22614_b.jpg"}},{"id":4,"common_name":"Candicans White Fir","scientific_name":["Abies concolor 'Candicans'"],"other_name":["Silver Fir","Concolor Fir","Colorado Fir"],"cycle":"Perennial","watering":"Average","sunlight":["full sun"],"default_image":{"license":5,"license_name":"Attribution-ShareAlike License","license_url":"https://creativecommons.org/licenses/by-sa/2.0/","original_url":"https://perenual.com/storage/species_image/4_abies_concolor_candicans/og/49283844888_332c9e46f2_b.jpg","regular_url":"https://perenual.com/storage/species_image/4_abies_concolor_candicans/regular/49283844888_332c9e46f2_b.jpg","medium_url":"https://perenual.com/storage/species_image/4_abies_concolor_candicans/medium/49283844888_332c9e46f2_b.jpg","small_url":"https://perenual.com/storage/species_image/4_abies_concolor_candicans/small/49283844888_332c9e46f2_b.jpg","thumbnail":"https://perenual.com/storage/species_image/4_abies_concolor_candicans/thumbnail/49283844888_332c9e46f2_b.jpg"}},{"id":5,"common_name":"Fraser Fir","scientific_name":["Abies fraseri"],"other_name":["Southern Fir"],"cycle":"Perennial","watering":"Frequent","sunlight":["full sun","part shade","filtered shade"],"default_image":{"license":4,"license_name":"Attribution License","license_url":"https://creativecommons.org/licenses/by/2.0/","original_url":"https://perenual.com/storage/species_image/5_abies_fraseri/og/36843539702_e80fc436e0_b.jpg","regular_url":"https://perenual.com/storage/species_image/5_abies_fraseri/regular/36843539702_e80fc436e0_b.jpg","medium_url":"https://perenual.com/storage/species_image/5_abies_fraseri/medium/36843539702_e80fc436e0_b.jpg","small_url":"https://perenual.com/storage/species_image/5_abies_fraseri/small/36843539702_e80fc436e0_b.jpg","thumbnail":"https://perenual.com/storage/species_image/5_abies_fraseri/thumbnail/36843539702_e80fc436e0_b.jpg"}},{"id":6,"common_name":"Golden Korean Fir","scientific_name":["Abies koreana 'Aurea'"],"other_name":[],"cycle":"Perennial","watering":"Average","sunlight":["Full sun","part shade"],"default_image":{"license":5,"license_name":"Attribution-ShareAlike License","license_url":"https://creativecommons.org/licenses/by-sa/2.0/","original_url":"https://perenual.com/storage/species_image/6_abies_koreana_aurea/og/49235570926_99ec10781d_b.jpg","regular_url":"https://perenual.com/storage/species_image/6_abies_koreana_aurea/regular/49235570926_99ec10781d_b.jpg","medium_url":"https://perenual.com/storage/species_image/6_abies_koreana_aurea/medium/49235570926_99ec10781d_b.jpg","small_url":"https://perenual.com/storage/species_image/6_abies_koreana_aurea/small/49235570926_99ec10781d_b.jpg","thumbnail":"https://perenual.com/storage/species_image/6_abies_koreana_aurea/thumbnail/49235570926_99ec10781d_b.jpg"}},{"id":7,"common_name":"Alpine Fir","scientific_name":["Abies lasiocarpa"],"other_name":["Subalpine Fir","Rocky Mountain Fir"],"cycle":"Perennial","watering":"Average","sunlight":["full sun","part shade"],"default_image":{"license":5,"license_name":"Attribution-ShareAlike License","license_url":"https://creativecommons.org/licenses/by-sa/2.0/","original_url":"https://perenual.com/storage/species_image/7_abies_lasiocarpa/og/51002756843_74fae3c2fa_b.jpg","regular_url":"https://perenual.com/storage/species_image/7_abies_lasiocarpa/regular/51002756843_74fae3c2fa_b.jpg","medium_url":"https://perenual.com/storage/species_image/7_abies_lasiocarpa/medium/51002756843_74fae3c2fa_b.jpg","small_url":"https://perenual.com/storage/species_image/7_abies_lasiocarpa/small/51002756843_74fae3c2fa_b.jpg","thumbnail":"https://perenual.com/storage/species_image/7_abies_lasiocarpa/thumbnail/51002756843_74fae3c2fa_b.jpg"}},{"id":8,"common_name":"Blue Spanish Fir","scientific_name":["Abies pinsapo 'Glauca'"],"other_name":["Glaucous Spanish Fir"],"cycle":"Perennial","watering":"Average","sunlight":["Full sun","part shade"],"default_image":{"license":4,"license_name":"Attribution License","license_url":"https://creativecommons.org/licenses/by/2.0/","original_url":"https://perenual.com/storage/species_image/8_abies_pinsapo_glauca/og/21657514018_c0d9fed9f4_b.jpg","regular_url":"https://perenual.com/storage/species_image/8_abies_pinsapo_glauca/regular/21657514018_c0d9fed9f4_b.jpg","medium_url":"https://perenual.com/storage/species_image/8_abies_pinsapo_glauca/medium/21657514018_c0d9fed9f4_b.jpg","small_url":"https://perenual.com/storage/species_image/8_abies_pinsapo_glauca/small/21657514018_c0d9fed9f4_b.jpg","thumbnail":"https://perenual.com/storage/species_image/8_abies_pinsapo_glauca/thumbnail/21657514018_c0d9fed9f4_b.jpg"}},{"id":9,"common_name":"Noble Fir","scientific_name":["Abies procera"],"other_name":["Red Fir","White Fir"],"cycle":"Perennial","watering":"Average","sunlight":["full sun"],"default_image":{"license":5,"license_name":"Attribution-ShareAlike License","license_url":"https://creativecommons.org/licenses/by-sa/2.0/","original_url":"https://perenual.com/storage/species_image/9_abies_procera/og/49107504112_6bd7effb8b_b.jpg","regular_url":"https://perenual.com/storage/species_image/9_abies_procera/regular/49107504112_6bd7effb8b_b.jpg","medium_url":"https://perenual.com/storage/species_image/9_abies_procera/medium/49107504112_6bd7effb8b_b.jpg","small_url":"https://perenual.com/storage/species_image/9_abies_procera/small/49107504112_6bd7effb8b_b.jpg","thumbnail":"https://perenual.com/storage/species_image/9_abies_procera/thumbnail/49107504112_6bd7effb8b_b.jpg"}},{"id":10,"common_name":"Johin Japanese Maple","scientific_name":["Acer 'Johin'"],"other_name":["Red Full Moon Maple"],"cycle":"Perennial","watering":"Average","sunlight":["full sun","part shade"],"default_image":{"license":451,"license_name":"CC0 1.0 Universal (CC0 1.0) Public Domain Dedication","license_url":"https://creativecommons.org/publicdomain/zero/1.0/","original_url":"https://perenual.com/storage/species_image/10_acer_johin/og/pexels-photo-2183508.jpg","regular_url":"https://perenual.com/storage/species_image/10_acer_johin/regular/pexels-photo-2183508.jpg","medium_url":"https://perenual.com/storage/species_image/10_acer_johin/medium/pexels-photo-2183508.jpg","small_url":"https://perenual.com/storage/species_image/10_acer_johin/small/pexels-photo-2183508.jpg","thumbnail":"https://perenual.com/storage/species_image/10_acer_johin/thumbnail/pexels-photo-2183508.jpg"}},{"id":11,"common_name":"Snakebark Maple","scientific_name":["Acer davidii"],"other_name":["Father David's Maple","Pere David's Maple"],"cycle":"Perennial","watering":"Average","sunlight":["Full sun","part shade"],"default_image":{"license":5,"license_name":"Attribution-ShareAlike License","license_url":"https://creativecommons.org/licenses/by-sa/2.0/","original_url":"https://perenual.com/storage/species_image/11_acer_davidii/og/6868591754_f4ac5b0510_b.jpg","regular_url":"https://perenual.com/storage/species_image/11_acer_davidii/regular/6868591754_f4ac5b0510_b.jpg","medium_url":"https://perenual.com/storage/species_image/11_acer_davidii/medium/6868591754_f4ac5b0510_b.jpg","small_url":"https://perenual.com/storage/species_image/11_acer_davidii/small/6868591754_f4ac5b0510_b.jpg","thumbnail":"https://perenual.com/storage/species_image/11_acer_davidii/thumbnail/6868591754_f4ac5b0510_b.jpg"}},{"id":12,"common_name":"Amur Maple","scientific_name":["Acer ginnala"],"other_name":[],"cycle":"Perennial","watering":"Average","sunlight":["full sun","part shade"],"default_image":{"license":5,"license_name":"Attribution-ShareAlike License","license_url":"https://creativecommons.org/licenses/by-sa/2.0/","original_url":"https://perenual.com/storage/species_image/12_acer_ginnala/og/10476032513_76ca899bc4_b.jpg","regular_url":"https://perenual.com/storage/species_image/12_acer_ginnala/regular/10476032513_76ca899bc4_b.jpg","medium_url":"https://perenual.com/storage/species_image/12_acer_ginnala/medium/10476032513_76ca899bc4_b.jpg","small_url":"https://perenual.com/storage/species_image/12_acer_ginnala/small/10476032513_76ca899bc4_b.jpg","thumbnail":"https://perenual.com/storage/species_image/12_acer_ginnala/thumbnail/10476032513_76ca899bc4_b.jpg"}},{"id":13,"common_name":"Flame Amur Maple","scientific_name":["Acer ginnala 'Flame'"],"other_name":[],"cycle":"Perennial","watering":"Frequent","sunlight":["full sun"],"default_image":{"license":451,"license_name":"CC0 1.0 Universal (CC0 1.0) Public Domain Dedication","license_url":"https://creativecommons.org/publicdomain/zero/1.0/","original_url":"https://perenual.com/storage/species_image/13_acer_ginnala_flame/og/pexels-photo-1649190.jpg","regular_url":"https://perenual.com/storage/species_image/13_acer_ginnala_flame/regular/pexels-photo-1649190.jpg","medium_url":"https://perenual.com/storage/species_image/13_acer_ginnala_flame/medium/pexels-photo-1649190.jpg","small_url":"https://perenual.com/storage/species_image/13_acer_ginnala_flame/small/pexels-photo-1649190.jpg","thumbnail":"https://perenual.com/storage/species_image/13_acer_ginnala_flame/thumbnail/pexels-photo-1649190.jpg"}},{"id":14,"common_name":"Red Rhapsody Amur Maple","scientific_name":["Acer ginnala 'Mondy'"],"other_name":[],"cycle":"Perennial","watering":"Frequent","sunlight":["full sun","part shade"],"default_image":{"license":451,"license_name":"CC0 1.0 Universal (CC0 1.0) Public Domain Dedication","license_url":"https://creativecommons.org/publicdomain/zero/1.0/","original_url":"https://perenual.com/storage/species_image/14_acer_ginnala_mondy/og/pexels-photo-1789879.jpg","regular_url":"https://perenual.com/storage/species_image/14_acer_ginnala_mondy/regular/pexels-photo-1789879.jpg","medium_url":"https://perenual.com/storage/species_image/14_acer_ginnala_mondy/medium/pexels-photo-1789879.jpg","small_url":"https://perenual.com/storage/species_image/14_acer_ginnala_mondy/small/pexels-photo-1789879.jpg","thumbnail":"https://perenual.com/storage/species_image/14_acer_ginnala_mondy/thumbnail/pexels-photo-1789879.jpg"}},{"id":15,"common_name":"Ruby Slippers Amur Maple","scientific_name":["Acer ginnala 'Ruby Slippers'"],"other_name":[],"cycle":"Perennial","watering":"Frequent","sunlight":["full sun","part shade"],"default_image":{"license":451,"license_name":"CC0 1.0 Universal (CC0 1.0) Public Domain Dedication","license_url":"https://creativecommons.org/publicdomain/zero/1.0/","original_url":"https://perenual.com/storage/species_image/15_acer_ginnala_ruby_slippers/og/pexels-photo-1640820.jpg","regular_url":"https://perenual.com/storage/species_image/15_acer_ginnala_ruby_slippers/regular/pexels-photo-1640820.jpg","medium_url":"https://perenual.com/storage/species_image/15_acer_ginnala_ruby_slippers/medium/pexels-photo-1640820.jpg","small_url":"https://perenual.com/storage/species_image/15_acer_ginnala_ruby_slippers/small/pexels-photo-1640820.jpg","thumbnail":"https://perenual.com/storage/species_image/15_acer_ginnala_ruby_slippers/thumbnail/pexels-photo-1640820.jpg"}},{"id":16,"common_name":"Paperbark Maple","scientific_name":["Acer griseum"],"other_name":[],"cycle":"Perennial","watering":"Average","sunlight":["Full sun","part shade"],"default_image":{"license":5,"license_name":"Attribution-ShareAlike License","license_url":"https://creativecommons.org/licenses/by-sa/2.0/","original_url":"https://perenual.com/storage/species_image/16_acer_griseum/og/5158906371_ed08a86876_b.jpg","regular_url":"https://perenual.com/storage/species_image/16_acer_griseum/regular/5158906371_ed08a86876_b.jpg","medium_url":"https://perenual.com/storage/species_image/16_acer_griseum/medium/5158906371_ed08a86876_b.jpg","small_url":"https://perenual.com/storage/species_image/16_acer_griseum/small/5158906371_ed08a86876_b.jpg","thumbnail":"https://perenual.com/storage/species_image/16_acer_griseum/thumbnail/5158906371_ed08a86876_b.jpg"}},{"id":17,"common_name":"Fullmoon Maple","scientific_name":["Acer japonicum"],"other_name":[],"cycle":"Perennial","watering":"Average","sunlight":["Full sun","part shade"],"default_image":{"license":4,"license_name":"Attribution License","license_url":"https://creativecommons.org/licenses/by/2.0/","original_url":"https://perenual.com/storage/species_image/17_acer_japonicum/og/7175475239_52543c51b3_b.jpg","regular_url":"https://perenual.com/storage/species_image/17_acer_japonicum/regular/7175475239_52543c51b3_b.jpg","medium_url":"https://perenual.com/storage/species_image/17_acer_japonicum/medium/7175475239_52543c51b3_b.jpg","small_url":"https://perenual.com/storage/species_image/17_acer_japonicum/small/7175475239_52543c51b3_b.jpg","thumbnail":"https://perenual.com/storage/species_image/17_acer_japonicum/thumbnail/7175475239_52543c51b3_b.jpg"}},{"id":18,"common_name":"Cutleaf Fullmoon Maple","scientific_name":["Acer japonicum 'Aconitifolium'"],"other_name":["fernleaf full moon maple"],"cycle":"Perennial","watering":"Average","sunlight":["Full sun","part shade"],"default_image":{"license":4,"license_name":"Attribution License","license_url":"https://creativecommons.org/licenses/by/2.0/","original_url":"https://perenual.com/storage/species_image/18_acer_japonicum_aconitifolium/og/23528789198_c419363323_b.jpg","regular_url":"https://perenual.com/storage/species_image/18_acer_japonicum_aconitifolium/regular/23528789198_c419363323_b.jpg","medium_url":"https://perenual.com/storage/species_image/18_acer_japonicum_aconitifolium/medium/23528789198_c419363323_b.jpg","small_url":"https://perenual.com/storage/species_image/18_acer_japonicum_aconitifolium/small/23528789198_c419363323_b.jpg","thumbnail":"https://perenual.com/storage/species_image/18_acer_japonicum_aconitifolium/thumbnail/23528789198_c419363323_b.jpg"}},{"id":19,"common_name":"Attaryi Fullmoon Maple*","scientific_name":["Acer japonicum 'Attaryi'"],"other_name":[],"cycle":"Perennial","watering":"Average","sunlight":["full sun","part shade"],"default_image":{"license":451,"license_name":"CC0 1.0 Universal (CC0 1.0) Public Domain Dedication","license_url":"https://creativecommons.org/publicdomain/zero/1.0/","original_url":"https://perenual.com/storage/species_image/19_acer_japonicum_attaryi/og/pexels-photo-669323.jpg","regular_url":"https://perenual.com/storage/species_image/19_acer_japonicum_attaryi/regular/pexels-photo-669323.jpg","medium_url":"https://perenual.com/storage/species_image/19_acer_japonicum_attaryi/medium/pexels-photo-669323.jpg","small_url":"https://perenual.com/storage/species_image/19_acer_japonicum_attaryi/small/pexels-photo-669323.jpg","thumbnail":"https://perenual.com/storage/species_image/19_acer_japonicum_attaryi/thumbnail/pexels-photo-669323.jpg"}},{"id":20,"common_name":"Golden Fullmoon Maple","scientific_name":["Acer japonicum 'Aureum'"],"other_name":[],"cycle":"Perennial","watering":"Average","sunlight":["full sun","part shade"],"default_image":{"license":45,"license_name":"Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0)","license_url":"https://creativecommons.org/licenses/by-sa/3.0/deed.en","original_url":"https://perenual.com/storage/species_image/20_acer_japonicum_aureum/og/2560px-Acer_shirasawanum_27Aureum27.jpg","regular_url":"https://perenual.com/storage/species_image/20_acer_japonicum_aureum/regular/2560px-Acer_shirasawanum_27Aureum27.jpg","medium_url":"https://perenual.com/storage/species_image/20_acer_japonicum_aureum/medium/2560px-Acer_shirasawanum_27Aureum27.jpg","small_url":"https://perenual.com/storage/species_image/20_acer_japonicum_aureum/small/2560px-Acer_shirasawanum_27Aureum27.jpg","thumbnail":"https://perenual.com/storage/species_image/20_acer_japonicum_aureum/thumbnail/2560px-Acer_shirasawanum_27Aureum27.jpg"}},{"id":21,"common_name":"Emmett's Pumpkin Fullmoon Maple","scientific_name":["Acer japonicum 'Emmett's Pumpkin'"],"other_name":[],"cycle":"Perennial","watering":"Average","sunlight":["full sun","part shade","filtered shade"],"default_image":{"license":45,"license_name":"Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0)","license_url":"https://creativecommons.org/licenses/by-sa/3.0/deed.en","original_url":"https://perenual.com/storage/species_image/21_acer_japonicum_emmetts_pumpkin/og/Acer_shirasawanum_28golden_fullmoon_maple29_2_284633285838129.jpg","regular_url":"https://perenual.com/storage/species_image/21_acer_japonicum_emmetts_pumpkin/regular/Acer_shirasawanum_28golden_fullmoon_maple29_2_284633285838129.jpg","medium_url":"https://perenual.com/storage/species_image/21_acer_japonicum_emmetts_pumpkin/medium/Acer_shirasawanum_28golden_fullmoon_maple29_2_284633285838129.jpg","small_url":"https://perenual.com/storage/species_image/21_acer_japonicum_emmetts_pumpkin/small/Acer_shirasawanum_28golden_fullmoon_maple29_2_284633285838129.jpg","thumbnail":"https://perenual.com/storage/species_image/21_acer_japonicum_emmetts_pumpkin/thumbnail/Acer_shirasawanum_28golden_fullmoon_maple29_2_284633285838129.jpg"}},{"id":22,"common_name":"Green Cascade Maple","scientific_name":["Acer japonicum 'Green Cascade'"],"other_name":[],"cycle":"Perennial","watering":"Average","sunlight":["Full sun","part shade"],"default_image":{"license":5,"license_name":"Attribution-ShareAlike License","license_url":"https://creativecommons.org/licenses/by-sa/2.0/","original_url":"https://perenual.com/storage/species_image/22_acer_japonicum_green_cascade/og/4847225395_2509ee2bfe_b.jpg","regular_url":"https://perenual.com/storage/species_image/22_acer_japonicum_green_cascade/regular/4847225395_2509ee2bfe_b.jpg","medium_url":"https://perenual.com/storage/species_image/22_acer_japonicum_green_cascade/medium/4847225395_2509ee2bfe_b.jpg","small_url":"https://perenual.com/storage/species_image/22_acer_japonicum_green_cascade/small/4847225395_2509ee2bfe_b.jpg","thumbnail":"https://perenual.com/storage/species_image/22_acer_japonicum_green_cascade/thumbnail/4847225395_2509ee2bfe_b.jpg"}},{"id":23,"common_name":"Big Leaf Maple","scientific_name":["Acer macrophyllum"],"other_name":["Oregon Maple"],"cycle":"Perennial","watering":"Average","sunlight":["full sun","part sun/part shade"],"default_image":{"license":4,"license_name":"Attribution License","license_url":"https://creativecommons.org/licenses/by/2.0/","original_url":"https://perenual.com/storage/species_image/23_acer_macrophyllum/og/52135137216_8a124b5188_b.jpg","regular_url":"https://perenual.com/storage/species_image/23_acer_macrophyllum/regular/52135137216_8a124b5188_b.jpg","medium_url":"https://perenual.com/storage/species_image/23_acer_macrophyllum/medium/52135137216_8a124b5188_b.jpg","small_url":"https://perenual.com/storage/species_image/23_acer_macrophyllum/small/52135137216_8a124b5188_b.jpg","thumbnail":"https://perenual.com/storage/species_image/23_acer_macrophyllum/thumbnail/52135137216_8a124b5188_b.jpg"}},{"id":24,"common_name":"Mocha Rose Big Leaf Maple","scientific_name":["Acer macrophyllum 'Mocha Rose'"],"other_name":["Oregon Maple"],"cycle":"Perennial","watering":"Average","sunlight":["full sun","part shade"],"default_image":{"license":5,"license_name":"Attribution-ShareAlike License","license_url":"https://creativecommons.org/licenses/by-sa/2.0/","original_url":"https://perenual.com/storage/species_image/24_acer_macrophyllum_mocha_rose/og/4715169892_220a9d39f6_b.jpg","regular_url":"https://perenual.com/storage/species_image/24_acer_macrophyllum_mocha_rose/regular/4715169892_220a9d39f6_b.jpg","medium_url":"https://perenual.com/storage/species_image/24_acer_macrophyllum_mocha_rose/medium/4715169892_220a9d39f6_b.jpg","small_url":"https://perenual.com/storage/species_image/24_acer_macrophyllum_mocha_rose/small/4715169892_220a9d39f6_b.jpg","thumbnail":"https://perenual.com/storage/species_image/24_acer_macrophyllum_mocha_rose/thumbnail/4715169892_220a9d39f6_b.jpg"}},{"id":25,"common_name":"Flamingo Boxelder","scientific_name":["Acer negundo 'Flamingo'"],"other_name":["Manitoba Maple","box elder"],"cycle":"Perennial","watering":"Average","sunlight":["full sun","part sun/part shade"],"default_image":{"license":5,"license_name":"Attribution-ShareAlike License","license_url":"https://creativecommons.org/licenses/by-sa/2.0/","original_url":"https://perenual.com/storage/species_image/25_acer_negundo_flamingo/og/5867345385_a9dff5bee7_b.jpg","regular_url":"https://perenual.com/storage/species_image/25_acer_negundo_flamingo/regular/5867345385_a9dff5bee7_b.jpg","medium_url":"https://perenual.com/storage/species_image/25_acer_negundo_flamingo/medium/5867345385_a9dff5bee7_b.jpg","small_url":"https://perenual.com/storage/species_image/25_acer_negundo_flamingo/small/5867345385_a9dff5bee7_b.jpg","thumbnail":"https://perenual.com/storage/species_image/25_acer_negundo_flamingo/thumbnail/5867345385_a9dff5bee7_b.jpg"}},{"id":26,"common_name":"Kelly's Gold Boxelder","scientific_name":["Acer negundo 'Kelly's Gold'"],"other_name":["Manitoba Maple","box elder"],"cycle":"Perennial","watering":"Frequent","sunlight":["full sun","part sun/part shade"],"default_image":{"license":5,"license_name":"Attribution-ShareAlike License","license_url":"https://creativecommons.org/licenses/by-sa/2.0/","original_url":"https://perenual.com/storage/species_image/26_acer_negundo_kellys_gold/og/28819730054_e2a2b797c9_b.jpg","regular_url":"https://perenual.com/storage/species_image/26_acer_negundo_kellys_gold/regular/28819730054_e2a2b797c9_b.jpg","medium_url":"https://perenual.com/storage/species_image/26_acer_negundo_kellys_gold/medium/28819730054_e2a2b797c9_b.jpg","small_url":"https://perenual.com/storage/species_image/26_acer_negundo_kellys_gold/small/28819730054_e2a2b797c9_b.jpg","thumbnail":"https://perenual.com/storage/species_image/26_acer_negundo_kellys_gold/thumbnail/28819730054_e2a2b797c9_b.jpg"}},{"id":27,"common_name":"Japanese Maple","scientific_name":["Acer palmatum"],"other_name":[],"cycle":"Perennial","watering":"Average","sunlight":["Full sun","part shade"],"default_image":{"license":45,"license_name":"Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0)","license_url":"https://creativecommons.org/licenses/by-sa/3.0/deed.en","original_url":"https://perenual.com/storage/species_image/27_acer_palmatum/og/2560px-Acer_palmatum_27Bloodgood27_kz01.jpg","regular_url":"https://perenual.com/storage/species_image/27_acer_palmatum/regular/2560px-Acer_palmatum_27Bloodgood27_kz01.jpg","medium_url":"https://perenual.com/storage/species_image/27_acer_palmatum/medium/2560px-Acer_palmatum_27Bloodgood27_kz01.jpg","small_url":"https://perenual.com/storage/species_image/27_acer_palmatum/small/2560px-Acer_palmatum_27Bloodgood27_kz01.jpg","thumbnail":"https://perenual.com/storage/species_image/27_acer_palmatum/thumbnail/2560px-Acer_palmatum_27Bloodgood27_kz01.jpg"}},{"id":28,"common_name":"Aka Shigitatsu Sawa Japanese Maple","scientific_name":["Acer palmatum 'Aka Shigitatsu Sawa'"],"other_name":["Samurai"],"cycle":"Perennial","watering":"Frequent","sunlight":["part sun/part shade"],"default_image":{"license":45,"license_name":"Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0)","license_url":"https://creativecommons.org/licenses/by-sa/3.0/deed.en","original_url":"https://perenual.com/storage/species_image/28_acer_palmatum_aka_shigitatsu_sawa/og/Acer_palmatum_Aka_shigitatsu_sawa_2zz.jpg","regular_url":"https://perenual.com/storage/species_image/28_acer_palmatum_aka_shigitatsu_sawa/regular/Acer_palmatum_Aka_shigitatsu_sawa_2zz.jpg","medium_url":"https://perenual.com/storage/species_image/28_acer_palmatum_aka_shigitatsu_sawa/medium/Acer_palmatum_Aka_shigitatsu_sawa_2zz.jpg","small_url":"https://perenual.com/storage/species_image/28_acer_palmatum_aka_shigitatsu_sawa/small/Acer_palmatum_Aka_shigitatsu_sawa_2zz.jpg","thumbnail":"https://perenual.com/storage/species_image/28_acer_palmatum_aka_shigitatsu_sawa/thumbnail/Acer_palmatum_Aka_shigitatsu_sawa_2zz.jpg"}},{"id":29,"common_name":"Alpenweiss Variegated Dwarf Japanese Maple*","scientific_name":["Acer palmatum 'Alpenweiss'"],"other_name":[],"cycle":"Perennial","watering":"Average","sunlight":["full sun","part shade"],"default_image":null},{"id":30,"common_name":"Ao Shime No Uchi Japanese Maple","scientific_name":["Acer palmatum 'Ao Shime No Uchi'"],"other_name":[],"cycle":"Perennial","watering":"Frequent","sunlight":["full sun","part shade"],"default_image":{"license":45,"license_name":"Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0)","license_url":"https://creativecommons.org/licenses/by-sa/3.0/deed.en","original_url":"https://perenual.com/storage/species_image/30_acer_palmatum_ao_shime_no_uchi/og/Acer_palmatum_Ao_shime_no_uchi_3zz.jpg","regular_url":"https://perenual.com/storage/species_image/30_acer_palmatum_ao_shime_no_uchi/regular/Acer_palmatum_Ao_shime_no_uchi_3zz.jpg","medium_url":"https://perenual.com/storage/species_image/30_acer_palmatum_ao_shime_no_uchi/medium/Acer_palmatum_Ao_shime_no_uchi_3zz.jpg","small_url":"https://perenual.com/storage/species_image/30_acer_palmatum_ao_shime_no_uchi/small/Acer_palmatum_Ao_shime_no_uchi_3zz.jpg","thumbnail":"https://perenual.com/storage/species_image/30_acer_palmatum_ao_shime_no_uchi/thumbnail/Acer_palmatum_Ao_shime_no_uchi_3zz.jpg"}}],"to":30,"per_page":30,"current_page":1,"from":1,"last_page":337,"total":10102};

    if (!response?.data?.length) {
        res.send([]);
        return;
    }
    const filteredData = response.data.filter((obj: any) => {
        return !(
            !obj?.id ||
            !obj?.common_name ||
            !obj.scientific_name ||
            !obj?.default_image?.medium_url ||
            !obj?.default_image?.regular_url ||
            /upgrade.access/.test(obj.default_image.medium_url)
        );
    });
    res.send(filteredData.map((obj: any) => {
        const id = obj.id;
        const common_name = Array.isArray(obj.common_name) ? obj.common_name[0] : obj.common_name;
        const scientific_name = Array.isArray(obj.scientific_name) ? obj.scientific_name[0] : obj.scientific_name;
        const image = obj.default_image.medium_url;
        return {
            id,
            common_name,
            scientific_name,
            image
        }
    }));
})
export default router;
